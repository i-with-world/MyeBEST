///////////////////////////////////////////////////////////////////////////////
//                                                                            /
//                                                      19/Jul/2014  21:11:13 /
// IAR ANSI C/C++ Compiler V6.30.6.23336/W32 EVALUATION for ARM               /
// Copyright 1999-2012 IAR Systems AB.                                        /
//                                                                            /
//    Cpu mode     =  thumb                                                   /
//    Endian       =  little                                                  /
//    Source file  =  E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Moter /
//                    _Control\Moter_Control.c                                /
//    Command line =  E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Moter /
//                    _Control\Moter_Control.c -D IAR -lCN                    /
//                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Flash_512K\L /
//                    ist\ -lB E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Fla /
//                    sh_512K\List\ -o E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_1 /
//                    7.48\Flash_512K\Obj\ --no_cse --no_unroll --no_inline   /
//                    --no_code_motion --no_tbaa --no_clustering              /
//                    --no_scheduling --debug --endian=little                 /
//                    --cpu=Cortex-M4 -e --fpu=None --dlib_config             /
//                    "D:\Program Files (x86)\iar\arm\INC\c\DLib_Config_Norma /
//                    l.h" -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Libr /
//                    ary\CPU\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\ /
//                    Library\Drivers\ADC\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\1 /
//                    40719_17.48\Library\Drivers\FTM\ -I                     /
//                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Library\Driv /
//                    ers\GPIO\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48 /
//                    \Library\Drivers\PIT\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\ /
//                    140719_17.48\MyFunction\ -I                             /
//                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\SD_System\   /
//                    -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\OL /
//                    ED\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐ /
//                    ò\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò /
//                    \Sample_AD\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17. /
//                    48\×Ó³ÌÐò\Judge_Way\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\1 /
//                    40719_17.48\×Ó³ÌÐò\Moter_Control\ -I                    /
//                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Syste /
//                    m_Init\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\× /
//                    Ó³ÌÐò\Turn_Control\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\14 /
//                    0719_17.48\×Ó³ÌÐò\Yaotou_Control\ -I                    /
//                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\bomak /
//                    aiguan\ -Ol                                             /
//    List file    =  E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Flash_512K\L /
//                    ist\Moter_Control.s                                     /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME Moter_Control

        #define SHT_PROGBITS 0x1

        EXTERN Delay_us
        EXTERN FTM_setPWMDty
        EXTERN Stop_GuDing
        EXTERN TiaoJieZhi
        EXTERN __aeabi_f2iz

        PUBLIC DCDuty
        PUBLIC Motor_Control
        PUBLIC Motor_Output
        PUBLIC direction

// E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Moter_Control\Moter_Control.c
//    1 #include "All_HeaderFiles.h"
//    2 /**********************³µÌåËÙ¶È¿ØÖÆ±äÁ¿¶¨Òå***********************/
//    3 /*-----------±äÁ¿¶¨Òå--------------*/              

        SECTION `.data`:DATA:REORDER:NOROOT(0)
//    4 int8s_t  direction=1;                  //µç»úÕý×ªÎª1£¬·´×ªÎª-1
direction:
        DATA
        DC8 1

        SECTION `.bss`:DATA:REORDER:NOROOT(2)
//    5 int DCDuty=0;                     //¿ØÖÆµç»ú
DCDuty:
        DS8 4
//    6 
//    7 
//    8 
//    9 /***********************************
//   10 º¯ÊýÃû£ºMotor_Control()
//   11 ×÷ÓÃ  £º¿ØÖÆµç»úµÄ×ª¶¯
//   12 ±¸×¢  £ºÎÞ
//   13 ***********************************/

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//   14 void  Motor_Control(void)
//   15 {   
Motor_Control:
        PUSH     {R7,LR}
//   16   
//   17    if(Stop_GuDing==0)
        LDR.N    R0,??DataTable1
        LDRB     R0,[R0, #+0]
        CMP      R0,#+0
        BNE.N    ??Motor_Control_0
//   18     DCDuty = (int)TiaoJieZhi;
        LDR.N    R0,??DataTable1_1
        LDR      R0,[R0, #+0]
        BL       __aeabi_f2iz
        LDR.N    R1,??DataTable1_2
        STR      R0,[R1, #+0]
        B.N      ??Motor_Control_1
//   19    else
//   20      DCDuty = 0;
??Motor_Control_0:
        LDR.N    R0,??DataTable1_2
        MOVS     R1,#+0
        STR      R1,[R0, #+0]
//   21     Motor_Output();
??Motor_Control_1:
        BL       Motor_Output
//   22 //    if( DCDuty>DC_Limit)                    //µç»úPWMµ÷½ÚÕ¼¿Õ±ÈÏÞ·ù
//   23 //      {
//   24 //          DCDuty= DC_Limit;
//   25 //
//   26 //      }
//   27 //
//   28 //    if( DCDuty<-DC_Limit)  
//   29 //      {
//   30 //          DCDuty=-DC_Limit;
//   31 //
//   32 //      }
//   33     //FTM_setPWMDty(FTM2, 0,DCDuty);
//   34 }
        POP      {R0,PC}          ;; return
//   35 
//   36 

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//   37 void Motor_Output(void)
//   38 {
Motor_Output:
        PUSH     {R7,LR}
//   39    
//   40    
//   41     if( DCDuty>DC_Limit)                    //µç»úPWMµ÷½ÚÕ¼¿Õ±ÈÏÞ·ù
        LDR.N    R0,??DataTable1_2
        LDR      R0,[R0, #+0]
        CMP      R0,#+500
        BLE.N    ??Motor_Output_0
//   42       {
//   43           DCDuty= DC_Limit;
        LDR.N    R0,??DataTable1_2
        MOV      R1,#+500
        STR      R1,[R0, #+0]
//   44 
//   45       }
//   46 
//   47     if( DCDuty<-DC_Limit)  
??Motor_Output_0:
        LDR.N    R0,??DataTable1_2
        LDR      R0,[R0, #+0]
        CMN      R0,#+500
        BGE.N    ??Motor_Output_1
//   48       {
//   49           DCDuty=-DC_Limit;
        LDR.N    R0,??DataTable1_2
        LDR.N    R1,??DataTable1_3  ;; 0xfffffe0c
        STR      R1,[R0, #+0]
//   50 
//   51       }
//   52  
//   53 
//   54     if(DCDuty>=0) 
??Motor_Output_1:
        LDR.N    R0,??DataTable1_2
        LDR      R0,[R0, #+0]
        CMP      R0,#+0
        BMI.N    ??Motor_Output_2
//   55       {
//   56           if(direction==1)                   //µç»úÇ°Ò»Ê±¿ÌÊÇÕý×ª
        LDR.N    R0,??DataTable1_4
        LDRSB    R0,[R0, #+0]
        CMP      R0,#+1
        BNE.N    ??Motor_Output_3
//   57           {
//   58               //PWMDTY01 = DCDuty;
//   59               //PTT_PTT0 = 0;
//   60             FTM_setPWMDty(FTM2, 0,DCDuty);
        LDR.N    R0,??DataTable1_2
        LDR      R2,[R0, #+0]
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+0
        LDR.N    R0,??DataTable1_5  ;; 0x400b8000
        BL       FTM_setPWMDty
//   61               direction=1;
        LDR.N    R0,??DataTable1_4
        MOVS     R1,#+1
        STRB     R1,[R0, #+0]
//   62           }   
//   63           if(direction==-1)                  //µç»úÇ°Ò»Ê±¿ÌÊÇ·´×ª
??Motor_Output_3:
        LDR.N    R0,??DataTable1_4
        LDRSB    R0,[R0, #+0]
        MOVS     R1,#-1
        CMP      R0,R1
        BNE.N    ??Motor_Output_2
//   64           {
//   65               //PWMDTY01 = 0; 
//   66               //PTT_PTT0 = 0;  
//   67             FTM_setPWMDty(FTM2, 0,0);
        MOVS     R2,#+0
        MOVS     R1,#+0
        LDR.N    R0,??DataTable1_5  ;; 0x400b8000
        BL       FTM_setPWMDty
//   68               Delay_us(1000);                   //ÏÈÍ£Ò»ÏÂPWM£¬È»ºóÔÙ·´×ª
        MOV      R0,#+1000
        BL       Delay_us
//   69                 
//   70               //PWMDTY01 = DCDuty;	      
//   71               //PTT_PTT0 = 0;  
//   72               FTM_setPWMDty(FTM2, 0,DCDuty);
        LDR.N    R0,??DataTable1_2
        LDR      R2,[R0, #+0]
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+0
        LDR.N    R0,??DataTable1_5  ;; 0x400b8000
        BL       FTM_setPWMDty
//   73               direction=1;     
        LDR.N    R0,??DataTable1_4
        MOVS     R1,#+1
        STRB     R1,[R0, #+0]
//   74           } 
//   75       }
//   76     
//   77      if(DCDuty<0)
??Motor_Output_2:
        LDR.N    R0,??DataTable1_2
        LDR      R0,[R0, #+0]
        CMP      R0,#+0
        BPL.N    ??Motor_Output_4
//   78         {     
//   79               FTM_setPWMDty(FTM2, 0,0);
        MOVS     R2,#+0
        MOVS     R1,#+0
        LDR.N    R0,??DataTable1_5  ;; 0x400b8000
        BL       FTM_setPWMDty
//   80             if(direction==1)                   //µç»úÇ°Ò»Ê±¿ÌÊÇÕý×ª
        LDR.N    R0,??DataTable1_4
        LDRSB    R0,[R0, #+0]
        CMP      R0,#+1
        BNE.N    ??Motor_Output_5
//   81             {
//   82                 //PWMDTY01 = 0;	
//   83                 //PTT_PTT0 = 0;
//   84                 FTM_setPWMDty(FTM2, 0,0);  
        MOVS     R2,#+0
        MOVS     R1,#+0
        LDR.N    R0,??DataTable1_5  ;; 0x400b8000
        BL       FTM_setPWMDty
//   85                 Delay_us(1000);
        MOV      R0,#+1000
        BL       Delay_us
//   86                   
//   87                 //PTT_PTT0 = 1;	 
//   88                 //PWMDTY01 = 500+DCDuty;
//   89                 FTM_setPWMDty(FTM2, 1,-DCDuty);
        LDR.N    R0,??DataTable1_2
        LDR      R0,[R0, #+0]
        RSBS     R2,R0,#+0
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+1
        LDR.N    R0,??DataTable1_5  ;; 0x400b8000
        BL       FTM_setPWMDty
//   90                 direction=-1;  
        LDR.N    R0,??DataTable1_4
        MOVS     R1,#-1
        STRB     R1,[R0, #+0]
//   91             }
//   92             if(direction==-1)                  //µç»úÇ°Ò»Ê±¿ÌÊÇ·´×ª
??Motor_Output_5:
        LDR.N    R0,??DataTable1_4
        LDRSB    R0,[R0, #+0]
        MOVS     R1,#-1
        CMP      R0,R1
        BNE.N    ??Motor_Output_4
//   93             {
//   94                 //PTT_PTT0 = 1;	 
//   95                 //PWMDTY01 = 500+DCDuty;
//   96               FTM_setPWMDty(FTM2, 1,-DCDuty);
        LDR.N    R0,??DataTable1_2
        LDR      R0,[R0, #+0]
        RSBS     R2,R0,#+0
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+1
        LDR.N    R0,??DataTable1_5  ;; 0x400b8000
        BL       FTM_setPWMDty
//   97                 direction=-1;
        LDR.N    R0,??DataTable1_4
        MOVS     R1,#-1
        STRB     R1,[R0, #+0]
//   98             }
//   99         }
//  100 
//  101 }   
??Motor_Output_4:
        POP      {R0,PC}          ;; return

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1:
        DC32     Stop_GuDing

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_1:
        DC32     TiaoJieZhi

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_2:
        DC32     DCDuty

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_3:
        DC32     0xfffffe0c

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_4:
        DC32     direction

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_5:
        DC32     0x400b8000

        SECTION `.iar_vfe_header`:DATA:REORDER:NOALLOC:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
        DC32 0

        SECTION __DLIB_PERTHREAD:DATA:REORDER:NOROOT(0)
        SECTION_TYPE SHT_PROGBITS, 0

        SECTION __DLIB_PERTHREAD_init:DATA:REORDER:NOROOT(0)
        SECTION_TYPE SHT_PROGBITS, 0

        END
// 
//   4 bytes in section .bss
//   1 byte  in section .data
// 296 bytes in section .text
// 
// 296 bytes of CODE memory
//   5 bytes of DATA memory
//
//Errors: none
//Warnings: none
