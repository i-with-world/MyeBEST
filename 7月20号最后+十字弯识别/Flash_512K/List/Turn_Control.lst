###############################################################################
#                                                                             #
#                                                       19/Jul/2014  21:11:11 #
# IAR ANSI C/C++ Compiler V6.30.6.23336/W32 EVALUATION for ARM                #
# Copyright 1999-2012 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Turn_C #
#                    ontrol\Turn_Control.c                                    #
#    Command line =  E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Turn_C #
#                    ontrol\Turn_Control.c -D IAR -lCN                        #
#                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Flash_512K\Li #
#                    st\ -lB E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Flash #
#                    _512K\List\ -o E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.4 #
#                    8\Flash_512K\Obj\ --no_cse --no_unroll --no_inline       #
#                    --no_code_motion --no_tbaa --no_clustering               #
#                    --no_scheduling --debug --endian=little --cpu=Cortex-M4  #
#                    -e --fpu=None --dlib_config "D:\Program Files            #
#                    (x86)\iar\arm\INC\c\DLib_Config_Normal.h" -I             #
#                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Library\CPU\  #
#                    -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Library\Dr #
#                    ivers\ADC\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48 #
#                    \Library\Drivers\FTM\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\1 #
#                    40719_17.48\Library\Drivers\GPIO\ -I                     #
#                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Library\Drive #
#                    rs\PIT\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\My #
#                    Function\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\ #
#                    SD_System\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48 #
#                    \×Ó³ÌÐò\OLED\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17 #
#                    .48\×Ó³ÌÐò\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.4 #
#                    8\×Ó³ÌÐò\Sample_AD\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140 #
#                    719_17.48\×Ó³ÌÐò\Judge_Way\ -I                           #
#                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Moter_ #
#                    Control\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\× #
#                    Ó³ÌÐò\System_Init\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\1407 #
#                    19_17.48\×Ó³ÌÐò\Turn_Control\ -I                         #
#                    E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Yaotou #
#                    _Control\ -I E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\ #
#                    ×Ó³ÌÐò\bomakaiguan\ -Ol                                  #
#    List file    =  E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Flash_512K\Li #
#                    st\Turn_Control.lst                                      #
#    Object file  =  E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\Flash_512K\Ob #
#                    j\Turn_Control.o                                         #
#                                                                             #
#                                                                             #
###############################################################################

E:\Ñ§Ï°\µÚ¾Å½ìÖÇÄÜ³µ\Ê¡Èü³ÌÐò\140719_17.48\×Ó³ÌÐò\Turn_Control\Turn_Control.c
      1          #include "All_HeaderFiles.h"
      2          
      3          /*-----Á¥ÊôÓÚTurn_Speed_PIDº¯Êý-----*/
      4          //int16s_t Turn_Angle;                               //×ªÏòËÙ¶È
      5          
      6          
      7          //int Black_Position_Last=0;
      8          //int Servo_Temp_P = 0;
      9          //int Servo_Temp_D = 0;
     10          //int Turn_KD_time=0;
     11          
     12          
     13          
     14          /*---Á¥ÊôÓÚTurn_Speed_PID_Outº¯Êý--*/
     15          //int16s_t Turn_AngleOut;                            //×ªÏòÊä³öÖµ£¬ÓÃÓÚÆ½»ºÊä³ö
     16          
     17          /*
     18          void Turn_Angle_PID(void)
     19          {
     20          if(((Black_Position_Last-Black_Position<20)&&(Black_Position_Last-Black_Position>-20))||((Black_Position_Last>-10)&&(Black_Position_Last<10)))
     21           {
     22            Servo_Temp_P = Black_Position *Turn_KP;  //¼ÆËã±ÈÀý²¿·Ö×ªÏò½Ç¶È
     23            Turn_KD_time++;                            
     24            if(Turn_KD_time==2) 
     25            {
     26                Servo_Temp_D =int((Black_Position -Black_Position_Last)*(Turn_KD));    //¼ÆËãÎ¢·Ö²¿·Ö×ªÏò½Ç¶È
     27                Turn_KD_time=0;      
     28            }
     29            
     30            Black_Position_Last=Black_Position;
     31           }
     32           
     33           
     34            if( Servo_Temp_D>200) 
     35            {
     36               Servo_Temp_D= 200;                                               //×ªÏòÎ¢·ÖÏÞ·ù
     37            }
     38            if( Servo_Temp_D<-200) 
     39            {
     40               Servo_Temp_D=-200;   
     41            }
     42          
     43            
     44          
     45            Turn_Angle = (Servo_Temp_P+ Servo_Temp_D);
     46            if( Turn_Angle>700) 
     47            {
     48               Turn_Angle= 700;                                               //×ªÏòÎ¢·ÖÏÞ·ù
     49            }
     50            if( Turn_Angle<-700) 
     51            {
     52               Turn_Angle=-700;
     53            }
     54            
     55           
     56            
     57            if(Turn_Angle>0) 
     58            {
     59               Turn_Angle=Turn_Angle+Turn_Angle/5;
     60            } 
     61             
     62            //Pwm_cnt_num=PWMCNT4<<8+PWMCNT5;
     63                                                     
     64            PWMDTY45= -Turn_Angle+Turn_Mid;                                                       //×ªÏò½Ç¶ÈÊä³ö
     65          }
     66          
     67          */


 

 


Errors: none
Warnings: none
