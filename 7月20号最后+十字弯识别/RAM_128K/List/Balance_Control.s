///////////////////////////////////////////////////////////////////////////////
//                                                                            /
//                                                      18/Jan/2013  21:34:33 /
// IAR ANSI C/C++ Compiler V6.30.6.23336/W32 EVALUATION for ARM               /
// Copyright 1999-2012 IAR Systems AB.                                        /
//                                                                            /
//    Cpu mode     =  thumb                                                   /
//    Endian       =  little                                                  /
//    Source file  =  E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunct /
//                    ion\Balance_Control.c                                   /
//    Command line =  E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunct /
//                    ion\Balance_Control.c -D IAR -lCN                       /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\RAM_128 /
//                    K\List\ -lB E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì× /
//                    ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0 /
//                    .0.0\RAM_128K\List\ -o E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£× /
//                    ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\ /
//                    20130118\V0.0.0\RAM_128K\Obj\ --no_cse --no_unroll      /
//                    --no_inline --no_code_motion --no_tbaa --no_clustering  /
//                    --no_scheduling --debug --endian=little                 /
//                    --cpu=Cortex-M4 -e --fpu=None --dlib_config             /
//                    D:\Tools\IAR6.30\arm\INC\c\DLib_Config_Normal.h -I      /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\Library /
//                    \CPU\ -I E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ /
//                    \µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0. /
//                    0\Library\Drivers\ADC\ -I E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ /
//                    ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ /
//                    ÓÃ\20130118\V0.0.0\Library\Drivers\FTM\ -I              /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\Library /
//                    \Drivers\GPIO\ -I E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µ /
//                    Ú°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130 /
//                    118\V0.0.0\Library\Drivers\PIT\ -I                      /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunct /
//                    ion\ -Ol                                                /
//    List file    =  E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\RAM_128 /
//                    K\List\Balance_Control.s                                /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME Balance_Control

        #define SHT_PROGBITS 0x1

        EXTERN AD_Value
        EXTERN Angle
        EXTERN Angle_dot
        EXTERN Kalman_Filter
        EXTERN Motor_Control
        EXTERN PI_Out
        EXTERN Turn_SpeedOut
        EXTERN __aeabi_cfcmple
        EXTERN __aeabi_cfrcmple
        EXTERN __aeabi_d2f
        EXTERN __aeabi_d2iz
        EXTERN __aeabi_ddiv
        EXTERN __aeabi_dmul
        EXTERN __aeabi_f2iz
        EXTERN __aeabi_fadd
        EXTERN __aeabi_fdiv
        EXTERN __aeabi_fmul
        EXTERN __aeabi_i2d
        EXTERN __aeabi_ui2f

        PUBLIC Angle_m
        PUBLIC Asin_to_Angle
        PUBLIC CarAngleControl
        PUBLIC CarVoltageGet
        PUBLIC Gyro_m
        PUBLIC Turn_SpeedOut_L
        PUBLIC Turn_SpeedOut_R
        PUBLIC g_nCarAcceVal
        PUBLIC g_nCarAngle
        PUBLIC g_nCarGyroVal
        PUBLIC g_nLeftMotorOut
        PUBLIC g_nRightMotorOut

// E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunction\Balance_Control.c
//    1 #include "AllHeaders.h"

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    2 int16s_t g_nCarAcceVal;           //½ÇËÙ¶È
g_nCarAcceVal:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    3 int16s_t g_nCarGyroVal;           //½Ç¼ÓËÙ¶È
g_nCarGyroVal:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    4 int16s_t g_nCarAngle;             //³µÌå½Ç¶È
g_nCarAngle:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(2)
//    5 float    Angle_m;                 //¼ÓËÙ¶È¼ÆËã³öµÄ½Ç¶È
Angle_m:
        DS8 4

        SECTION `.bss`:DATA:REORDER:NOROOT(2)
//    6 float    Gyro_m;                  //ÍÓÂÝÒÇ¼ÆËã³öµÄ½ÇËÙ¶È
Gyro_m:
        DS8 4

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    7 int16s_t g_nLeftMotorOut;
g_nLeftMotorOut:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    8 int16s_t g_nRightMotorOut;
g_nRightMotorOut:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(2)
//    9 int32s_t Turn_SpeedOut_L;
Turn_SpeedOut_L:
        DS8 4

        SECTION `.bss`:DATA:REORDER:NOROOT(2)
//   10 int32s_t Turn_SpeedOut_R;
Turn_SpeedOut_R:
        DS8 4
//   11 
//   12 /*------------------------------------------
//   13 ²é±íÊý×é£¬ÓÃÓÚ¶Ô´Ó -1~+1 µÄ asin ¶ÔÓ¦µÄ½Ç¶È
//   14 -------------------------------------------*/

        SECTION `.rodata`:CONST:REORDER:NOROOT(2)
//   15 const float  Asin_to_Angle[201]={ -90.000000,-81.890386,-78.521659,-75.930132,-73.739795,-71.805128,-70.051556,-68.434815,
Asin_to_Angle:
        DATA
        DC32 0C2B40000H, 0C2A3C7E1H, 0C29D0B17H, 0C297DC3AH, 0C2937AC6H
        DC32 0C28F9C3AH, 0C28C1A66H, 0C288DEA0H, 0C285DA27H, 0C28302BDH
        DC32 0C28050EEH, 0C27B7E34H, 0C27691C8H, 0C271D5A5H, 0C26D442EH
        DC32 0C268D8C0H, 0C2648F7CH, 0C260651CH, 0C25C56D4H, 0C258623CH
        DC32 0C2548539H, 0C250BDF7H, 0C24D0AD4H, 0C2496A62H, 0C245DB57H
        DC32 0C2425C8CH, 0C23EECF8H, 0C23B8BABH, 0C23837CAH, 0C234F08EH
        DC32 0C231B541H, 0C22E853BH, 0C22B5FE4H, 0C22844ADH, 0C2253312H
        DC32 0C2222A9AH, 0C21F2AD3H, 0C21C3353H, 0C21943B9H, 0C2165BA7H
        DC32 0C2137AC7H, 0C210A0C7H, 0C20DCD5BH, 0C20B003BH, 0C2083923H
        DC32 0C20577D2H, 0C202BC0CH, 0C2000596H, 0C1FAA873H, 0C1F54F86H
        DC32 0C1F00000H, 0C1EAB983H, 0C1E57BB4H, 0C1E0463EH, 0C1DB18CCH
        DC32 0C1D5F311H, 0C1D0D4C0H, 0C1CBBD90H, 0C1C6AD3CH, 0C1C1A381H
        DC32 0C1BCA01CH, 0C1B7A2D0H, 0C1B2AB62H, 0C1ADB995H, 0C1A8CD34H
        DC32 0C1A3E605H, 0C19F03D7H, 0C19A2674H, 0C1954DACH, 0C190794EH
        DC32 0C18BA92CH, 0C186DD18H, 0C18214E6H, 0C17AA0D6H, 0C1711EF9H
        DC32 0C167A3E4H, 0C15E2F45H, 0C154C0CFH, 0C14B5833H, 0C141F527H
        DC32 0C1389762H, 0C12F3E9AH, 0C125EA89H, 0C11C9AE8H, 0C1134F72H
        DC32 0C10A07E5H, 0C100C3FAH, 0C0EF06E6H, 0C0DC8C1CH, 0C0CA1712H
        DC32 0C0B7A748H, 0C0A53C45H, 0C092D588H, 0C0807295H, 0C05C25E5H
        DC32 0C0376C48H, 0C012B763H, 0BFDC0C7CH, 0BF92AFDEH, 0BF12ADF7H, 0H
        DC32 3F12ADF7H, 3F92AFDEH, 3FDC0C7CH, 4012B763H, 40376C48H, 405C25E5H
        DC32 40807295H, 4092D588H, 40A53C45H, 40B7A748H, 40CA1712H, 40DC8C1CH
        DC32 40EF06E6H, 4100C3FAH, 410A07E5H, 41134F72H, 411C9AE8H, 4125EA89H
        DC32 412F3E9AH, 41389762H, 4141F527H, 414B5833H, 4154C0CFH, 415E2F45H
        DC32 4167A3E4H, 41711EF9H, 417AA0D6H, 418214E6H, 4186DD18H, 418BA92CH
        DC32 4190794EH, 41954DACH, 419A2674H, 419F03D7H, 41A3E605H, 41A8CD34H
        DC32 41ADB995H, 41B2AB62H, 41B7A2D0H, 41BCA01CH, 41C1A381H, 41C6AD3CH
        DC32 41CBBD90H, 41D0D4C0H, 41D5F311H, 41DB18CCH, 41E0463EH, 41E57BB4H
        DC32 41EAB983H, 41F00000H, 41F54F86H, 41FAA873H, 42000596H, 4202BC0CH
        DC32 420577D2H, 42083923H, 420B003BH, 420DCD5BH, 4210A0C7H, 42137AC7H
        DC32 42165BA7H, 421943B9H, 421C3353H, 421F2AD3H, 42222A9AH, 42253312H
        DC32 422844ADH, 422B5FE4H, 422E853BH, 4231B541H, 4234F08EH, 423837CAH
        DC32 423B8BABH, 423EECF8H, 42425C8CH, 4245DB57H, 42496A62H, 424D0AD4H
        DC32 4250BDF7H, 42548539H, 4258623CH, 425C56D4H, 4260651CH, 42648F7CH
        DC32 4268D8C0H, 426D442EH, 4271D5A5H, 427691C8H, 427B7E34H, 428050EEH
        DC32 428302BDH, 4285DA27H, 4288DEA0H, 428C1A66H, 428F9C3AH, 42937AC6H
        DC32 4297DC3AH, 429D0B17H, 42A3C7E1H, 42B40000H
//   16 -66.926082,-65.505352,-64.158067,-62.873247,-61.642363,-60.458639,-59.316583,-58.211669,-57.140120,-56.098738,-55.084794,
//   17 -54.095931,-53.130102,-52.185511,-51.260575,-50.353889,-49.464198,-48.590378,-47.731416,-46.886394,-46.054480,-45.234915,
//   18 -44.427004,-43.630109,-42.843643,-42.067065,-41.299873,-40.541602,-39.791819,-39.050123,-38.316134,-37.589503,-36.869898,
//   19 -36.157008,-35.450543,-34.750226,-34.055798,-33.367013,-32.683639,-32.005455,-31.332251,-30.663830,-30.000000,-29.340582,
//   20 -28.685402,-28.034297,-27.387108,-26.743684,-26.103881,-25.467560,-24.834587,-24.204835,-23.578178,-22.954499,-22.333683,
//   21 -21.715617,-21.100196,-20.487315,-19.876874,-19.268775,-18.662925,-18.059230,-17.457603,-16.857956,-16.260205,-15.664267,
//   22 -15.070062,-14.477512,-13.886540,-13.297072,-12.709033,-12.122352,-11.536959,-10.952784,-10.369760,-9.787819,-9.206896,
//   23 -8.626927,-8.047846,-7.469592,-6.892103,-6.315316,-5.739170,-5.163607,-4.588566,-4.013987,-3.439813,-2.865984,-2.292443,
//   24 -1.719131,-1.145992,-0.572967,0.000000,0.572967,1.145992,1.719131,2.292443,2.865984,3.439813,4.013987,4.588566,5.163607,
//   25 5.739170,6.315316,6.892103,7.469592,8.047846,8.626927,9.206896,9.787819,10.369760,10.952784,11.536959,12.122352,12.709033,
//   26 13.297072,13.886540,14.477512,15.070062,15.664267,16.260205,16.857956,17.457603,18.059230,18.662925,19.268775,19.876874,
//   27 20.487315,21.100196,21.715617,22.333683,22.954499,23.578178,24.204835,24.834587,25.467560,26.103881,26.743684,27.387108,
//   28 28.034297,28.685402,29.340582,30.000000,30.663830,31.332251,32.005455,32.683639,33.367013,34.055798,34.750226,35.450543,
//   29 36.157008,36.869898,37.589503,38.316134,39.050123,39.791819,40.541602,41.299873,42.067065,42.843643,43.630109,44.427004,
//   30 45.234915,46.054480,46.886394,47.731416,48.590378,49.464198,50.353889,51.260575,52.185511,53.130102,54.095931,55.084794,
//   31 56.098738,57.140120,58.211669,59.316583,60.458639,61.642363,62.873247,64.158067,65.505352,66.926082,68.434815,70.051556,
//   32 71.805128,73.739795,75.930132,78.521659,81.890386,90.000000,
//   33 };
//   34 /*========================================
//   35 º¯ÊýÃû£ºCarVoltageGet()
//   36 ×÷ÓÃ  £º´¦Àí²É¼¯µÄADÖµ£¬½«Æä×ª»»Îª½Ç¶ÈÓë½ÇËÙ¶È
//   37 ±¸×¢  £ºÎÞ
//   38 =========================================*/

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//   39 void CarVoltageGet(void) 
//   40 {
CarVoltageGet:
        PUSH     {R7,LR}
//   41  float lnDeltaValue;
//   42  int32s_t lnDeltaValue1;
//   43  lnDeltaValue = (float)CV_ACCE_VAL;
        LDR.N    R0,??DataTable1
        LDRH     R0,[R0, #+0]
        BL       __aeabi_ui2f
//   44  
//   45  lnDeltaValue = lnDeltaValue - (CV_ACCE_Z_ZERO + ACCE_Z_ZERO_Increment);
        LDR.N    R1,??DataTable1_1  ;; 0xc3b50000
        BL       __aeabi_fadd
//   46 
//   47 
//   48  lnDeltaValue = (float)(lnDeltaValue*5000L/1024);                     //»ñµÃµçÑ¹Öµ
        LDR.N    R1,??DataTable1_2  ;; 0x459c4000
        BL       __aeabi_fmul
        MOVS     R1,#+1149239296
        BL       __aeabi_fdiv
//   49  lnDeltaValue = lnDeltaValue * 10L / 67;                              //Çó³ö Z Öá¼ÓËÙ¶È 800mV/g     //1ºÅ³µÎª³ýÒÔ68 2ºÅ³µµÈ³ýÒÔ56
        LDR.N    R1,??DataTable1_3  ;; 0x41200000
        BL       __aeabi_fmul
        LDR.N    R1,??DataTable1_4  ;; 0x42860000
        BL       __aeabi_fdiv
//   50  if(lnDeltaValue> 100)    lnDeltaValue= 100;                          //¼ÆËã²é±íÖµ
        LDR.N    R1,??DataTable1_5  ;; 0x42c80001
        BL       __aeabi_cfrcmple
        BHI.N    ??CarVoltageGet_0
        LDR.N    R0,??DataTable1_6  ;; 0x42c80000
//   51  if(lnDeltaValue<-100)    lnDeltaValue=-100;  
??CarVoltageGet_0:
        LDR.N    R1,??DataTable1_7  ;; 0xc2c80000
        BL       __aeabi_cfcmple
        BCS.N    ??CarVoltageGet_1
        LDR.N    R0,??DataTable1_7  ;; 0xc2c80000
//   52  Angle_m = Asin_to_Angle[(int16s_t)(lnDeltaValue+100)];               //¼ÆËã½Ç¶È 
??CarVoltageGet_1:
        LDR.N    R1,??DataTable1_6  ;; 0x42c80000
        BL       __aeabi_fadd
        BL       __aeabi_f2iz
        SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
        LDR.N    R1,??DataTable1_8
        LDR      R0,[R1, R0, LSL #+2]
        LDR.N    R1,??DataTable1_9
        STR      R0,[R1, #+0]
//   53     
//   54  lnDeltaValue1 = (int16s_t)CV_GYRO_VAL;                               //¶ÁÈ¡ÍÓÂÝÒÇADÖµ
        LDR.N    R0,??DataTable1
        LDRSH    R0,[R0, #+2]
        SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
//   55  lnDeltaValue1 = (int16s_t)CV_GYRO_ZERO - lnDeltaValue1;              //¼õÈ¥ÁãÆ«ÖÃÖµ
        MOVW     R1,#+437
        SUBS     R0,R1,R0
//   56  lnDeltaValue1 = (int32u_t)(lnDeltaValue1*5000L/1024);                //»ñµÃµçÑ¹Öµ 
        MOVW     R1,#+5000
        MULS     R0,R1,R0
        MOV      R1,#+1024
        SDIV     R0,R0,R1
//   57  Gyro_m = lnDeltaValue1 * 10.0 / 67;                                  //¼ÆËã½Ç½ÇËÙ¶È,ÔÚÔ­Ê¼µçÂ·ÖÐÒÑ¾­·Å´óÁË 10 ±¶
        BL       __aeabi_i2d
        MOVS     R2,#+0
        LDR.N    R3,??DataTable1_10  ;; 0x40240000
        BL       __aeabi_dmul
        MOVS     R2,#+0
        LDR.N    R3,??DataTable1_11  ;; 0x4050c000
        BL       __aeabi_ddiv
        BL       __aeabi_d2f
        LDR.N    R1,??DataTable1_12
        STR      R0,[R1, #+0]
//   58       
//   59  Kalman_Filter( Angle_m, Gyro_m);                                     //¿¨¶ûÂüÂË²¨
        LDR.N    R0,??DataTable1_12
        LDR      R1,[R0, #+0]
        LDR.N    R0,??DataTable1_9
        LDR      R0,[R0, #+0]
        BL       Kalman_Filter
//   60   
//   61  g_nCarAngle   = (int16s_t)( ((Angle) ) * 7);                        //µ÷Õû³µÌå½Ç¶È
        LDR.N    R0,??DataTable1_13
        LDR      R1,[R0, #+0]
        LDR.N    R0,??DataTable1_14  ;; 0x40e00000
        BL       __aeabi_fmul
        BL       __aeabi_f2iz
        LDR.N    R1,??DataTable1_15
        STRH     R0,[R1, #+0]
//   62  g_nCarGyroVal = (int16s_t)( Angle_dot * 10);                         //µ÷Õû³µÌå½ÇËÙ¶È        
        LDR.N    R0,??DataTable1_16
        LDR      R1,[R0, #+0]
        LDR.N    R0,??DataTable1_3  ;; 0x41200000
        BL       __aeabi_fmul
        BL       __aeabi_f2iz
        LDR.N    R1,??DataTable1_17
        STRH     R0,[R1, #+0]
//   63 }
        POP      {R0,PC}          ;; return
//   64 /*==========================================
//   65 º¯ÊýÃû£ºCarAngleControl()
//   66 ×÷ÓÃ  £º³µÌå½Ç¶È¿ØÖÆ£¬ÄÚ»·
//   67 ±¸×¢  £ºÎÞ
//   68 ===========================================*/

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//   69 void CarAngleControl(void)
//   70 {
CarAngleControl:
        PUSH     {R4,LR}
//   71  int16s_t nLeft, nRight;
//   72  int16s_t nSpeed;
//   73  int16s_t nP, nD;
//   74 	  
//   75  nP = g_nCarAngle;
        LDR.N    R0,??DataTable1_15
        LDRSH    R4,[R0, #+0]
//   76  nP = (int16s_t)(-nP * (UP_KP));              
        SXTH     R4,R4            ;; SignExt  R4,R4,#+16,#+16
        RSBS     R0,R4,#+0
        BL       __aeabi_i2d
        MOVS     R2,#+0
        LDR.N    R3,??DataTable1_18  ;; 0x40200000
        BL       __aeabi_dmul
        BL       __aeabi_d2iz
        MOVS     R4,R0
//   77  nD = g_nCarGyroVal;
        LDR.N    R0,??DataTable1_17
        LDRSH    R0,[R0, #+0]
//   78  nD = (int16s_t)(-nD * (UP_KD));
        SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
        RSBS     R0,R0,#+0
        BL       __aeabi_i2d
        LDR.N    R2,??DataTable1_19  ;; 0x9999999a
        LDR.N    R3,??DataTable1_20  ;; 0x3fc99999
        BL       __aeabi_dmul
        BL       __aeabi_d2iz
//   79  
//   80  nSpeed = nP + nD;
        ADDS     R0,R0,R4
//   81    
//   82  if(nSpeed > MOTOR_SPEED_SET_MAX) 	
        MOVW     R1,#+1101
        SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
        CMP      R0,R1
        BLT.N    ??CarAngleControl_0
//   83  {
//   84 	nSpeed = MOTOR_SPEED_SET_MAX;
        MOVW     R0,#+1100
        B.N      ??CarAngleControl_1
//   85  }
//   86  else if(nSpeed < MOTOR_SPEED_SET_MIN)	
??CarAngleControl_0:
        LDR.N    R1,??DataTable1_21  ;; 0xfffffbb4
        SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
        CMP      R0,R1
        BGE.N    ??CarAngleControl_1
//   87  {
//   88 	nSpeed = MOTOR_SPEED_SET_MIN;
        LDR.N    R0,??DataTable1_21  ;; 0xfffffbb4
//   89  }
//   90 
//   91 
//   92 
//   93  
//   94  if(Turn_SpeedOut > TURN_LIMIT)
??CarAngleControl_1:
        LDR.N    R1,??DataTable1_22
        LDR      R1,[R1, #+0]
        CMP      R1,#+320
        BLE.N    ??CarAngleControl_2
//   95  {
//   96   Turn_SpeedOut = TURN_LIMIT;
        LDR.N    R1,??DataTable1_22
        MOV      R2,#+320
        STR      R2,[R1, #+0]
//   97  }                                                       
//   98  if(Turn_SpeedOut < -TURN_LIMIT)
??CarAngleControl_2:
        LDR.N    R1,??DataTable1_22
        LDR      R1,[R1, #+0]
        CMN      R1,#+320
        BGE.N    ??CarAngleControl_3
//   99  {
//  100   Turn_SpeedOut = -TURN_LIMIT;
        LDR.N    R1,??DataTable1_22
        LDR.N    R2,??DataTable1_23  ;; 0xfffffec0
        STR      R2,[R1, #+0]
//  101  }
//  102  Turn_SpeedOut_L = Turn_SpeedOut;
??CarAngleControl_3:
        LDR.N    R1,??DataTable1_24
        LDR.N    R2,??DataTable1_22
        LDR      R2,[R2, #+0]
        STR      R2,[R1, #+0]
//  103  Turn_SpeedOut_R = Turn_SpeedOut;
        LDR.N    R1,??DataTable1_25
        LDR.N    R2,??DataTable1_22
        LDR      R2,[R2, #+0]
        STR      R2,[R1, #+0]
//  104 
//  105 #if 0   
//  106  Turn_SpeedOut_L = Turn_SpeedOut;
//  107  Turn_SpeedOut_R = Turn_SpeedOut;
//  108 
//  109 
//  110  if(Turn_SpeedOut > 0 && Turn_SpeedOut > TURN_LIMIT)
//  111  {
//  112   Turn_SpeedOut_R = TURN_LIMIT;
//  113    
//  114   if(Turn_SpeedOut_L > TURN_LIMIT_LOW)
//  115   {  
//  116    Turn_SpeedOut_L = TURN_LIMIT_LOW;
//  117   }
//  118   if(Turn_SpeedOut_L < -TURN_LIMIT_LOW)
//  119   {  
//  120    Turn_SpeedOut_L = -TURN_LIMIT_LOW;
//  121   }
//  122  }                                                        //×ó×ªÊ±,ÓÒ²àÂÖÏÞ·ù£¬×ó²àÂÖ²»ÏÞ·ù
//  123  if(Turn_SpeedOut < 0 && Turn_SpeedOut < -TURN_LIMIT)
//  124  {
//  125   if(Turn_SpeedOut_R > TURN_LIMIT_LOW)  
//  126   {
//  127    Turn_SpeedOut_R = TURN_LIMIT_LOW;
//  128   }
//  129   if(Turn_SpeedOut_R < -TURN_LIMIT_LOW) 
//  130   {
//  131    Turn_SpeedOut_R = -TURN_LIMIT_LOW;
//  132   }
//  133   Turn_SpeedOut_L = -TURN_LIMIT;
//  134  }
//  135 
//  136 #endif
//  137                                                    //ÓÒ×ªÊ±£¬×ó²àÂÖÏÞ·ù£¬ÓÒ²àÂÖ²»ÏÞ·ù
//  138  //if(Acc_Check_Flg == 1)
//  139  //{
//  140  // nLeft  = (int16s_t)nSpeed;
//  141  // nRight = (int16s_t)nSpeed;
//  142  //}
//  143 // else
//  144 // {
//  145 //    nLeft  = (int16s_t)nSpeed + PI_Out + (int16s_t)Turn_SpeedOut_L;   
//  146 //    nRight = (int16s_t)nSpeed + PI_Out - (int16s_t)Turn_SpeedOut_R;
//  147 //    nLeft  = (int16s_t)nSpeed + PI_Out;   
//  148 //    nRight = (int16s_t)nSpeed + PI_Out;
//  149       nLeft  =  (int16s_t)nSpeed - PI_Out - Turn_SpeedOut_L;   
        LDR.N    R1,??DataTable1_26
        LDRH     R1,[R1, #+0]
        SUBS     R1,R0,R1
        LDR.N    R2,??DataTable1_24
        LDR      R2,[R2, #+0]
        SUBS     R1,R1,R2
//  150       nRight =  (int16s_t)nSpeed - PI_Out + Turn_SpeedOut_R;
        LDR.N    R2,??DataTable1_26
        LDRH     R2,[R2, #+0]
        SUBS     R0,R0,R2
        LDR.N    R2,??DataTable1_25
        LDR      R2,[R2, #+0]
        ADDS     R0,R2,R0
//  151   
//  152 // }
//  153  
//  154  g_nLeftMotorOut = nLeft;
        LDR.N    R2,??DataTable1_27
        STRH     R1,[R2, #+0]
//  155  g_nRightMotorOut = nRight;
        LDR.N    R1,??DataTable1_28
        STRH     R0,[R1, #+0]
//  156 		
//  157  Motor_Control();      
        BL       Motor_Control
//  158 }
        POP      {R4,PC}          ;; return

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1:
        DC32     AD_Value

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_1:
        DC32     0xc3b50000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_2:
        DC32     0x459c4000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_3:
        DC32     0x41200000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_4:
        DC32     0x42860000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_5:
        DC32     0x42c80001

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_6:
        DC32     0x42c80000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_7:
        DC32     0xc2c80000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_8:
        DC32     Asin_to_Angle

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_9:
        DC32     Angle_m

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_10:
        DC32     0x40240000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_11:
        DC32     0x4050c000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_12:
        DC32     Gyro_m

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_13:
        DC32     Angle

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_14:
        DC32     0x40e00000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_15:
        DC32     g_nCarAngle

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_16:
        DC32     Angle_dot

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_17:
        DC32     g_nCarGyroVal

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_18:
        DC32     0x40200000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_19:
        DC32     0x9999999a

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_20:
        DC32     0x3fc99999

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_21:
        DC32     0xfffffbb4

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_22:
        DC32     Turn_SpeedOut

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_23:
        DC32     0xfffffec0

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_24:
        DC32     Turn_SpeedOut_L

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_25:
        DC32     Turn_SpeedOut_R

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_26:
        DC32     PI_Out

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_27:
        DC32     g_nLeftMotorOut

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable1_28:
        DC32     g_nRightMotorOut

        SECTION `.iar_vfe_header`:DATA:REORDER:NOALLOC:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
        DC32 0

        SECTION __DLIB_PERTHREAD:DATA:REORDER:NOROOT(0)
        SECTION_TYPE SHT_PROGBITS, 0

        SECTION __DLIB_PERTHREAD_init:DATA:REORDER:NOROOT(0)
        SECTION_TYPE SHT_PROGBITS, 0

        END
// 
//  26 bytes in section .bss
// 804 bytes in section .rodata
// 478 bytes in section .text
// 
// 478 bytes of CODE  memory
// 804 bytes of CONST memory
//  26 bytes of DATA  memory
//
//Errors: none
//Warnings: none
