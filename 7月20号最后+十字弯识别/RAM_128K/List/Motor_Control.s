///////////////////////////////////////////////////////////////////////////////
//                                                                            /
//                                                      18/Jan/2013  21:34:28 /
// IAR ANSI C/C++ Compiler V6.30.6.23336/W32 EVALUATION for ARM               /
// Copyright 1999-2012 IAR Systems AB.                                        /
//                                                                            /
//    Cpu mode     =  thumb                                                   /
//    Endian       =  little                                                  /
//    Source file  =  E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunct /
//                    ion\Motor_Control.c                                     /
//    Command line =  E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunct /
//                    ion\Motor_Control.c -D IAR -lCN                         /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\RAM_128 /
//                    K\List\ -lB E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì× /
//                    ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0 /
//                    .0.0\RAM_128K\List\ -o E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£× /
//                    ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\ /
//                    20130118\V0.0.0\RAM_128K\Obj\ --no_cse --no_unroll      /
//                    --no_inline --no_code_motion --no_tbaa --no_clustering  /
//                    --no_scheduling --debug --endian=little                 /
//                    --cpu=Cortex-M4 -e --fpu=None --dlib_config             /
//                    D:\Tools\IAR6.30\arm\INC\c\DLib_Config_Normal.h -I      /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\Library /
//                    \CPU\ -I E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ /
//                    \µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0. /
//                    0\Library\Drivers\ADC\ -I E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ /
//                    ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ /
//                    ÓÃ\20130118\V0.0.0\Library\Drivers\FTM\ -I              /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\Library /
//                    \Drivers\GPIO\ -I E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µ /
//                    Ú°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130 /
//                    118\V0.0.0\Library\Drivers\PIT\ -I                      /
//                    E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunct /
//                    ion\ -Ol                                                /
//    List file    =  E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇ /
//                    ÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\RAM_128 /
//                    K\List\Motor_Control.s                                  /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME Motor_Control

        #define SHT_PROGBITS 0x1

        EXTERN Delay1
        EXTERN FTM_readQUADValue
        EXTERN FTM_setPWMDty
        EXTERN __aeabi_d2iz
        EXTERN __aeabi_dmul
        EXTERN __aeabi_i2d
        EXTERN g_nLeftMotorOut
        EXTERN g_nRightMotorOut

        PUBLIC Motor_Control
        PUBLIC Motor_Control_L
        PUBLIC Motor_Control_R
        PUBLIC NowSpeed_L
        PUBLIC NowSpeed_L_Temp
        PUBLIC NowSpeed_R
        PUBLIC NowSpeed_R_Temp
        PUBLIC ObjectSpeed
        PUBLIC Speed_Read
        PUBLIC carCrazyCnt
        PUBLIC closeMotorFlag
        PUBLIC nLeftSpd
        PUBLIC nRightSpd

// E:\¿ÎÍâ×ÊÁÏ\·ÉË¼¿¨¶ûÖÇÄÜ³µ\ÈÕ³£×ÊÁÏ\µÚ°Ë½ì×ÊÁÏ\µÚ°Ë½ìÖÇÄÜ³µ\Ö±Á¢³µµ÷ÊÔ\ARM\ARMÑ§Ï°Ê¹ÓÃ\20130118\V0.0.0\MyFunction\Motor_Control.c
//    1 #include "AllHeaders.h"
//    2 
//    3 /********************²âËÙÏà¹ØÁ¿¶¨Òå************************/

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    4 int16s_t   NowSpeed_R = 0;  
NowSpeed_R:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    5 int16s_t   NowSpeed_L = 0;
NowSpeed_L:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    6 int16s_t   NowSpeed_R_Temp = 0;  
NowSpeed_R_Temp:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    7 int16s_t   NowSpeed_L_Temp = 0;
NowSpeed_L_Temp:
        DS8 2
//    8 /********************µç»úÊä³öÏà¹ØÁ¿¶¨Òå*********************/

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//    9 int16s_t  ObjectSpeed=0;	                 //Ä¿±êËÙ¶È
ObjectSpeed:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(0)
//   10 int8u_t   closeMotorFlag = 0;
closeMotorFlag:
        DS8 1

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//   11 int16s_t  nLeftSpd = 0;
nLeftSpd:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//   12 int16s_t  nRightSpd = 0;
nRightSpd:
        DS8 2

        SECTION `.bss`:DATA:REORDER:NOROOT(1)
//   13 int16u_t  carCrazyCnt = 0;
carCrazyCnt:
        DS8 2
//   14 /*******************************************************************************
//   15 * º¯ÊýÃû³Æ£ºSpeed_Read
//   16 * Ãè    Êö£º¶ÁÈ¡×óÓÒÂÖµÄËÙ¶È
//   17 *******************************************************************************/

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//   18 void Speed_Read(void)
//   19 {                       
Speed_Read:
        PUSH     {R7,LR}
//   20   FTM_readQUADValue(FTM1, &NowSpeed_L_Temp );
        LDR.W    R1,??DataTable3
        LDR.W    R0,??DataTable3_1  ;; 0x40039000
        BL       FTM_readQUADValue
//   21   FTM_readQUADValue(FTM2, &NowSpeed_R_Temp );
        LDR.W    R1,??DataTable3_2
        LDR.W    R0,??DataTable3_3  ;; 0x400b8000
        BL       FTM_readQUADValue
//   22   
//   23   NowSpeed_L = (int16s_t)(NowSpeed_L_Temp*5/27*0.511);//0.972  725
        LDR.N    R0,??DataTable3
        LDRSH    R0,[R0, #+0]
        MOVS     R1,#+5
        MULS     R0,R1,R0
        MOVS     R1,#+27
        SDIV     R0,R0,R1
        BL       __aeabi_i2d
        LDR.N    R2,??DataTable3_4  ;; 0xac083127
        LDR.N    R3,??DataTable3_5  ;; 0x3fe05a1c
        BL       __aeabi_dmul
        BL       __aeabi_d2iz
        LDR.N    R1,??DataTable3_6
        STRH     R0,[R1, #+0]
//   24   NowSpeed_R = (int16s_t)(NowSpeed_R_Temp*5/27*0.495);//0.921  685  //³µÏòºóÔË¶¯²âËÙÎªÕý
        LDR.N    R0,??DataTable3_2
        LDRSH    R0,[R0, #+0]
        MOVS     R1,#+5
        MULS     R0,R1,R0
        MOVS     R1,#+27
        SDIV     R0,R0,R1
        BL       __aeabi_i2d
        LDR.N    R2,??DataTable3_7  ;; 0x7ae147ae
        LDR.N    R3,??DataTable3_8  ;; 0x3fdfae14
        BL       __aeabi_dmul
        BL       __aeabi_d2iz
        LDR.N    R1,??DataTable3_9
        STRH     R0,[R1, #+0]
//   25 }
        POP      {R0,PC}          ;; return
//   26 
//   27 
//   28 
//   29 /*******************************************************************************
//   30 * º¯ÊýÃû³Æ£ºMotor_Control
//   31 * Ãè    Êö£ºµç»úÊä³ö¿ØÖÆ
//   32 *******************************************************************************/

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//   33 void Motor_Control(void) 
//   34 {   
Motor_Control:
        PUSH     {R7,LR}
//   35   //int16s_t getCarAngle = 0;
//   36   //int16s_t getCarSpeed = 0;
//   37   ///////////Ô¤ÁôÐ´·è³å±£»¤/////////////
//   38   nLeftSpd = g_nLeftMotorOut;
        LDR.N    R0,??DataTable3_10
        LDR.N    R1,??DataTable3_11
        LDRH     R1,[R1, #+0]
        STRH     R1,[R0, #+0]
//   39   nRightSpd = g_nRightMotorOut;
        LDR.N    R0,??DataTable3_12
        LDR.N    R1,??DataTable3_13
        LDRH     R1,[R1, #+0]
        STRH     R1,[R0, #+0]
//   40     
//   41   if(nLeftSpd > 0) 		
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+1
        BLT.N    ??Motor_Control_0
//   42      nLeftSpd += MOTOR_OUT_DEAD_VAL;
        LDR.N    R0,??DataTable3_10
        LDR.N    R1,??DataTable3_10
        LDRH     R1,[R1, #+0]
        STRH     R1,[R0, #+0]
        B.N      ??Motor_Control_1
//   43   else if(nLeftSpd < 0) 
??Motor_Control_0:
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+0
        BPL.N    ??Motor_Control_1
//   44      nLeftSpd -= MOTOR_OUT_DEAD_VAL;  
        LDR.N    R0,??DataTable3_10
        LDR.N    R1,??DataTable3_10
        LDRH     R1,[R1, #+0]
        STRH     R1,[R0, #+0]
//   45   if(nRightSpd > 0) 		
??Motor_Control_1:
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+1
        BLT.N    ??Motor_Control_2
//   46      nRightSpd += MOTOR_OUT_DEAD_VAL;
        LDR.N    R0,??DataTable3_12
        LDR.N    R1,??DataTable3_12
        LDRH     R1,[R1, #+0]
        STRH     R1,[R0, #+0]
        B.N      ??Motor_Control_3
//   47   else if(nRightSpd < 0) 
??Motor_Control_2:
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+0
        BPL.N    ??Motor_Control_3
//   48      nRightSpd -= MOTOR_OUT_DEAD_VAL;
        LDR.N    R0,??DataTable3_12
        LDR.N    R1,??DataTable3_12
        LDRH     R1,[R1, #+0]
        STRH     R1,[R0, #+0]
//   49  
//   50   
//   51   //nRightSpd = 100;                    // µç»úÖ±½Ó¸³Öµ
//   52   //nLeftSpd = 100;                       // µç»úÖ±½Ó¸³Öµ   +Ïòºó -ÏòÇ°×ß
//   53   
//   54   if( nRightSpd > MOTOR_SPEED_SET_MAX) nRightSpd = MOTOR_SPEED_SET_MAX; 
??Motor_Control_3:
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        MOVW     R1,#+1101
        CMP      R0,R1
        BLT.N    ??Motor_Control_4
        LDR.N    R0,??DataTable3_12
        MOVW     R1,#+1100
        STRH     R1,[R0, #+0]
//   55   if( nLeftSpd > MOTOR_SPEED_SET_MAX)  nLeftSpd = MOTOR_SPEED_SET_MAX;
??Motor_Control_4:
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        MOVW     R1,#+1101
        CMP      R0,R1
        BLT.N    ??Motor_Control_5
        LDR.N    R0,??DataTable3_10
        MOVW     R1,#+1100
        STRH     R1,[R0, #+0]
//   56   if( nRightSpd < MOTOR_SPEED_SET_MIN) nRightSpd = MOTOR_SPEED_SET_MIN; 
??Motor_Control_5:
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        LDR.N    R1,??DataTable3_14  ;; 0xfffffbb4
        CMP      R0,R1
        BGE.N    ??Motor_Control_6
        LDR.N    R0,??DataTable3_12
        LDR.N    R1,??DataTable3_14  ;; 0xfffffbb4
        STRH     R1,[R0, #+0]
//   57   if( nLeftSpd < MOTOR_SPEED_SET_MIN)  nLeftSpd = MOTOR_SPEED_SET_MIN;
??Motor_Control_6:
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        LDR.N    R1,??DataTable3_14  ;; 0xfffffbb4
        CMP      R0,R1
        BGE.N    ??Motor_Control_7
        LDR.N    R0,??DataTable3_10
        LDR.N    R1,??DataTable3_14  ;; 0xfffffbb4
        STRH     R1,[R0, #+0]
//   58    
//   59   Motor_Control_L();
??Motor_Control_7:
        BL       Motor_Control_L
//   60   Motor_Control_R();
        BL       Motor_Control_R
//   61 }
        POP      {R0,PC}          ;; return
//   62 
//   63 /*******************************************************************************
//   64 * º¯ÊýÃû³Æ£ºMotor_Control_L
//   65 * Ãè    Êö£º×óµç»úÊä³ö¿ØÖÆ
//   66 *******************************************************************************/

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//   67 void Motor_Control_L(void)
//   68 {
Motor_Control_L:
        PUSH     {R7,LR}
//   69   static int8s_t direction_L = 1;
//   70   
//   71   if(nLeftSpd>=0) 
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+0
        BMI.N    ??Motor_Control_L_0
//   72   {
//   73     if(direction_L==1)
        LDR.N    R0,??DataTable3_15
        LDRSB    R0,[R0, #+0]
        CMP      R0,#+1
        BNE.N    ??Motor_Control_L_1
//   74     {
//   75       FTM_setPWMDty(FTM0, 0, nLeftSpd);
        LDR.N    R0,??DataTable3_10
        LDRH     R2,[R0, #+0]
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+0
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   76       FTM_setPWMDty(FTM0, 2, 0);
        MOVS     R2,#+0
        MOVS     R1,#+2
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   77       direction_L=1;
        LDR.N    R0,??DataTable3_15
        MOVS     R1,#+1
        STRB     R1,[R0, #+0]
//   78     }
//   79     if(direction_L==-1)
??Motor_Control_L_1:
        LDR.N    R0,??DataTable3_15
        LDRSB    R0,[R0, #+0]
        MOVS     R1,#-1
        CMP      R0,R1
        BNE.N    ??Motor_Control_L_0
//   80     {
//   81       FTM_setPWMDty(FTM0, 0, 0);
        MOVS     R2,#+0
        MOVS     R1,#+0
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   82       FTM_setPWMDty(FTM0, 2, 0);
        MOVS     R2,#+0
        MOVS     R1,#+2
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   83       
//   84       Delay1(60);
        MOVS     R0,#+60
        BL       Delay1
//   85       
//   86       FTM_setPWMDty(FTM0, 0, nLeftSpd);
        LDR.N    R0,??DataTable3_10
        LDRH     R2,[R0, #+0]
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+0
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   87       FTM_setPWMDty(FTM0, 2, 0);
        MOVS     R2,#+0
        MOVS     R1,#+2
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   88       direction_L=1;
        LDR.N    R0,??DataTable3_15
        MOVS     R1,#+1
        STRB     R1,[R0, #+0]
//   89     } 
//   90   }
//   91   if(nLeftSpd<0)
??Motor_Control_L_0:
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+0
        BPL.N    ??Motor_Control_L_2
//   92   {
//   93     if(direction_L==1)
        LDR.N    R0,??DataTable3_15
        LDRSB    R0,[R0, #+0]
        CMP      R0,#+1
        BNE.N    ??Motor_Control_L_3
//   94     {
//   95       FTM_setPWMDty(FTM0, 0, 0);
        MOVS     R2,#+0
        MOVS     R1,#+0
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   96       FTM_setPWMDty(FTM0, 2, 0);
        MOVS     R2,#+0
        MOVS     R1,#+2
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//   97       
//   98       Delay1(60);
        MOVS     R0,#+60
        BL       Delay1
//   99       
//  100       FTM_setPWMDty(FTM0, 0, 0);
        MOVS     R2,#+0
        MOVS     R1,#+0
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  101       FTM_setPWMDty(FTM0, 2, -nLeftSpd);
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        RSBS     R2,R0,#+0
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+2
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  102       direction_L=-1;  
        LDR.N    R0,??DataTable3_15
        MOVS     R1,#-1
        STRB     R1,[R0, #+0]
//  103     }
//  104     if(direction_L==-1)
??Motor_Control_L_3:
        LDR.N    R0,??DataTable3_15
        LDRSB    R0,[R0, #+0]
        MOVS     R1,#-1
        CMP      R0,R1
        BNE.N    ??Motor_Control_L_2
//  105     {
//  106       FTM_setPWMDty(FTM0, 0, 0);
        MOVS     R2,#+0
        MOVS     R1,#+0
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  107       FTM_setPWMDty(FTM0, 2, -nLeftSpd);
        LDR.N    R0,??DataTable3_10
        LDRSH    R0,[R0, #+0]
        RSBS     R2,R0,#+0
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+2
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  108       direction_L=-1;
        LDR.N    R0,??DataTable3_15
        MOVS     R1,#-1
        STRB     R1,[R0, #+0]
//  109     }
//  110   }
//  111 }
??Motor_Control_L_2:
        POP      {R0,PC}          ;; return

        SECTION `.data`:DATA:REORDER:NOROOT(0)
??direction_L:
        DATA
        DC8 1
//  112 
//  113 /*******************************************************************************
//  114 * º¯ÊýÃû³Æ£ºMotor_Control_R
//  115 * Ãè    Êö£ºÓÒµç»úÊä³ö¿ØÖÆ
//  116 *******************************************************************************/

        SECTION `.text`:CODE:NOROOT(1)
        THUMB
//  117 void Motor_Control_R(void)
//  118 {
Motor_Control_R:
        PUSH     {R7,LR}
//  119   static int8s_t direction_R = 1;
//  120   
//  121   if(nRightSpd>=0) 
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+0
        BMI.N    ??Motor_Control_R_0
//  122   {
//  123     if(direction_R==1)
        LDR.N    R0,??DataTable3_17
        LDRSB    R0,[R0, #+0]
        CMP      R0,#+1
        BNE.N    ??Motor_Control_R_1
//  124     {       
//  125       FTM_setPWMDty(FTM0, 4, nRightSpd);
        LDR.N    R0,??DataTable3_12
        LDRH     R2,[R0, #+0]
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+4
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  126       FTM_setPWMDty(FTM0, 6, 0);
        MOVS     R2,#+0
        MOVS     R1,#+6
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  127       direction_R=1;
        LDR.N    R0,??DataTable3_17
        MOVS     R1,#+1
        STRB     R1,[R0, #+0]
//  128     }
//  129     if(direction_R==-1)
??Motor_Control_R_1:
        LDR.N    R0,??DataTable3_17
        LDRSB    R0,[R0, #+0]
        MOVS     R1,#-1
        CMP      R0,R1
        BNE.N    ??Motor_Control_R_0
//  130     {
//  131       FTM_setPWMDty(FTM0, 4, 0);
        MOVS     R2,#+0
        MOVS     R1,#+4
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  132       FTM_setPWMDty(FTM0, 6, 0); 
        MOVS     R2,#+0
        MOVS     R1,#+6
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  133       
//  134       Delay1(60); 
        MOVS     R0,#+60
        BL       Delay1
//  135       
//  136       FTM_setPWMDty(FTM0, 4, nRightSpd);
        LDR.N    R0,??DataTable3_12
        LDRH     R2,[R0, #+0]
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+4
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  137       FTM_setPWMDty(FTM0, 6, 0);
        MOVS     R2,#+0
        MOVS     R1,#+6
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  138       direction_R=1;
        LDR.N    R0,??DataTable3_17
        MOVS     R1,#+1
        STRB     R1,[R0, #+0]
//  139     } 
//  140   }
//  141   if(nRightSpd<0)
??Motor_Control_R_0:
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        CMP      R0,#+0
        BPL.N    ??Motor_Control_R_2
//  142   {
//  143     if(direction_R==1)
        LDR.N    R0,??DataTable3_17
        LDRSB    R0,[R0, #+0]
        CMP      R0,#+1
        BNE.N    ??Motor_Control_R_3
//  144     {
//  145       FTM_setPWMDty(FTM0, 4, 0);
        MOVS     R2,#+0
        MOVS     R1,#+4
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  146       FTM_setPWMDty(FTM0, 6, 0); 
        MOVS     R2,#+0
        MOVS     R1,#+6
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  147       
//  148       Delay1(60); 
        MOVS     R0,#+60
        BL       Delay1
//  149       
//  150       FTM_setPWMDty(FTM0, 4, 0);
        MOVS     R2,#+0
        MOVS     R1,#+4
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  151       FTM_setPWMDty(FTM0, 6, -nRightSpd);
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        RSBS     R2,R0,#+0
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+6
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  152       direction_R=-1;  
        LDR.N    R0,??DataTable3_17
        MOVS     R1,#-1
        STRB     R1,[R0, #+0]
//  153     }
//  154     if(direction_R==-1)
??Motor_Control_R_3:
        LDR.N    R0,??DataTable3_17
        LDRSB    R0,[R0, #+0]
        MOVS     R1,#-1
        CMP      R0,R1
        BNE.N    ??Motor_Control_R_2
//  155     {
//  156       FTM_setPWMDty(FTM0, 4, 0);
        MOVS     R2,#+0
        MOVS     R1,#+4
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  157       FTM_setPWMDty(FTM0, 6, -nRightSpd);
        LDR.N    R0,??DataTable3_12
        LDRSH    R0,[R0, #+0]
        RSBS     R2,R0,#+0
        UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
        MOVS     R1,#+6
        LDR.N    R0,??DataTable3_16  ;; 0x40038000
        BL       FTM_setPWMDty
//  158       direction_R=-1;
        LDR.N    R0,??DataTable3_17
        MOVS     R1,#-1
        STRB     R1,[R0, #+0]
//  159     }
//  160   }
//  161 }
??Motor_Control_R_2:
        POP      {R0,PC}          ;; return

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3:
        DC32     NowSpeed_L_Temp

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_1:
        DC32     0x40039000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_2:
        DC32     NowSpeed_R_Temp

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_3:
        DC32     0x400b8000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_4:
        DC32     0xac083127

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_5:
        DC32     0x3fe05a1c

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_6:
        DC32     NowSpeed_L

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_7:
        DC32     0x7ae147ae

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_8:
        DC32     0x3fdfae14

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_9:
        DC32     NowSpeed_R

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_10:
        DC32     nLeftSpd

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_11:
        DC32     g_nLeftMotorOut

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_12:
        DC32     nRightSpd

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_13:
        DC32     g_nRightMotorOut

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_14:
        DC32     0xfffffbb4

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_15:
        DC32     ??direction_L

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_16:
        DC32     0x40038000

        SECTION `.text`:CODE:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
??DataTable3_17:
        DC32     ??direction_R

        SECTION `.data`:DATA:REORDER:NOROOT(0)
??direction_R:
        DATA
        DC8 1

        SECTION `.iar_vfe_header`:DATA:REORDER:NOALLOC:NOROOT(2)
        SECTION_TYPE SHT_PROGBITS, 0
        DATA
        DC32 0

        SECTION __DLIB_PERTHREAD:DATA:REORDER:NOROOT(0)
        SECTION_TYPE SHT_PROGBITS, 0

        SECTION __DLIB_PERTHREAD_init:DATA:REORDER:NOROOT(0)
        SECTION_TYPE SHT_PROGBITS, 0

        END
// 
//  17 bytes in section .bss
//   2 bytes in section .data
// 868 bytes in section .text
// 
// 868 bytes of CODE memory
//  19 bytes of DATA memory
//
//Errors: none
//Warnings: none
